function openBuffer(e,t,o){buffers[e]=CodeMirror.Doc(t,o);var n=document.createElement("option");n.appendChild(document.createTextNode(e)),sel_top.appendChild(n)}function newBuf(e){var t=document.getElementById("mode"),o=t.value;CodeMirror.on(t,"keypress",function(e){13==e.keyCode&&change()});var n,s,r,i=t.value;if(n=/.+\.([^.]+)$/.exec(i)){var d=CodeMirror.findModeByExtension(n[1]);d&&(s=d.mode,r=d.mime)}else if(/\//.test(i)){var d=CodeMirror.findModeByMIME(i);d&&(s=d.mode,r=i)}else s=r=i;if(null!=o){if(buffers.hasOwnProperty(o))return $("#filealready").html("<div class='alert alert-danger alert-dismissible fade show' role='alert'> يوجد بالفعل ملف بإسم <strong>"+o+"</strong>.<button onclick='remobacfile()' type='button' class='close' data-dismiss='alert' aria-label='Close'> <span aria-hidden='true'>&times;</span> </button> </div>"),void(document.getElementById("buffers").style.backgroundColor="#d4edda");s?($("#filedonecreated").html("<div class='alert alert-success alert-dismissible fade show' role='alert'> تم إنشاء ملف <strong>"+o+"</strong> بنجاح.<button onclick='remobacfile()' type='button' class='close' data-dismiss='alert' aria-label='Close'> <span aria-hidden='true'>&times;</span> </button> </div>"),document.getElementById("buffers").style.backgroundColor="#d4edda",$("#select option[id='"+r+"']").length?(CodeMirror.autoLoadMode(editor,s),$("#select option[id='"+r+"']").attr("selected","selected")):($("#select").append($("<option>",{id:r,value:s,selected:"selected",text:"اللغة "+s+" - "+r})),CodeMirror.autoLoadMode(editor,s))):($("#filecreated").last().html("<div class='alert alert-warning alert-dismissible fade show' role='alert'> تم إنشاء الملف <strong>"+i+" </strong> ولكن تعذر علينا العثور على لغة البرمجة، يرجى تحديد لغة البرمجة من الخيارات.<button onclick='remobac()' type='button' class='close' data-dismiss='alert' aria-label='Close'> <span aria-hidden='true'>&times;</span> </button> </div>"),document.getElementById("select").style.backgroundColor="#fff3cd",$("#select").val("textile").change(),$("#select").change(function(){editor.setOption("mode",$(this).val())})),openBuffer(o,"",r),selectBuffer("top"==e?editor:ed_bot,o);var l=sel_top;l.value=o}}function selectBuffer(e,t){var o=buffers[t];o.getEditor()&&(o=o.linkedDoc({sharedHist:!0}));var n=e.swapDoc(o),s=n.iterLinkedDocs(function(e){s=e});if(s){for(var t in buffers)buffers[t]==n&&(buffers[t]=s);n.unlinkDoc(s)}e.focus()}function nodeContent(e){var t=document.getElementById(e),o=t.textContent||t.innerText;return o=o.slice(o.match(/^\s*/)[0].length,o.length-o.match(/\s*$/)[0].length)+"\n"}function completeAfter(e,t){e.getCursor();return t&&!t()||setTimeout(function(){e.state.completionActive||e.showHint({completeSingle:!1})},100),CodeMirror.Pass}function completeIfAfterLt(e){return completeAfter(e,function(){var t=e.getCursor();return"<"==e.getRange(CodeMirror.Pos(t.line,t.ch-1),t)})}function completeIfInTag(e){return completeAfter(e,function(){var t=e.getTokenAt(e.getCursor());if("string"==t.type&&(!/['"]/.test(t.string.charAt(t.string.length-1))||1==t.string.length))return!1;var o=CodeMirror.innerMode(e.getMode(),t.state).state;return o.tagName})}function selectTheme(){var e=document.getElementById("selecttheme"),t=new Date;t.setDate(t.getDate()+9600),t=t.toUTCString();var o=e.options[e.selectedIndex].value,n=e.options[e.selectedIndex].textContent;if("default"==o)o="default",editor.setOption("theme",o),document.cookie="themes=default; expires="+t,document.cookie="themesmode=default; expires="+t;else{var s=document.createElement("link");s.href="https://get.doitf.com/tools/codemirror/theme/"+o+".css",s.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(s),editor.setOption("theme",n),document.cookie="themes="+o+"; expires="+t,document.cookie="themesmode="+n+"; expires="+t}}function looksLikeScheme(e){return!/^\s*\(\s*function\b/.test(e)&&/^\s*[;\(]/.test(e)}function selectMode(){var e=modeInput.selectedIndex,t=modeInput.options[e].value.toLowerCase(),o=modeInput.options[e].id.toLowerCase();CodeMirror.autoLoadMode(editor,t),editor.setOption("mode",looksLikeScheme(editor.getValue())?"mixedMode":o)}function previewcheck(){function e(){var e=document.getElementById("previewiframe"),t=e.contentDocument||e.contentWindow.document;t.open(),t.write(editor.getValue()),t.close()}var t=document.getElementById("previewcheck");1==t.checked?(setTimeout(e,300),document.getElementById("previewiframe").style.display="block","text/html"==editor.getOption("mode")?document.getElementById("previewiframe").style.display="block":"[object Object]"==editor.getOption("mode")?document.getElementById("previewiframe").style.display="block":document.getElementById("previewiframe").style.display="none"):document.getElementById("previewiframe").style.display="none"}function selectsizecode(e){document.getElementsByClassName("CodeMirror")[0].style.height=e+"px"}function sizecodes(){var e=document.getElementById("sizecodes"),t=document.getElementById("setsizecodes");1==e.checked?(document.getElementsByClassName("CodeMirror")[0].style.height="auto",t.setAttribute("disabled","disabled"),t.style.display="none"):(document.getElementsByClassName("CodeMirror")[0].style.height=t.value+"px",t.style.display="inline-block",t.removeAttribute("disabled"))}function hintOptionsshow(){var e=document.getElementById("hintOptions");if(1==e.checked){var t=document.createElement("script");t.src="https://get.doitf.com/tools/codemirror/addon/hint/xml-hint.js",document.getElementsByTagName("head")[0].appendChild(t),editor.setOption("hintOptions",{schemaInfo:tags}),editor.setOption("extraKeys",{"'<'":completeAfter,"'/'":completeIfAfterLt,"' '":completeIfInTag,"'='":completeIfInTag,F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)},"Alt-F":"findPersistent","Ctrl-Space":"autocomplete","Ctrl-Q":function(e){e.foldCode(e.getCursor())}})}else editor.setOption("hintOptions",!1)}function showTrailingSpace(){var e=document.getElementById("showTrailingSpace");1==e.checked?editor.setOption("showTrailingSpace",!0):editor.setOption("showTrailingSpace",!1)}function closetags(){var e=document.getElementById("closetag");1==e.checked?editor.setOption("autoCloseTags",!0):editor.setOption("autoCloseTags",!1)}function checkBoxdir(){var e=document.getElementById("rtl");1==e.checked?editor.setOption("direction","rtl"):editor.setOption("direction","ltr")}function lineNumbers(){var e=document.getElementById("lineNumbers");1==e.checked?editor.setOption("lineNumbers",!0):editor.setOption("lineNumbers",!1)}function autoCloseBrackets(){var e=document.getElementById("autoCloseBrackets");1==e.checked?editor.setOption("autoCloseBrackets",!0):editor.setOption("autoCloseBrackets",!1)}function foldGutter(){var e=document.getElementById("foldGutter");1==e.checked?editor.setOption("foldGutter",!0):editor.setOption("foldGutter",!1)}function styleActiveLine(){var e=document.getElementById("styleActiveLine");1==e.checked?editor.setOption("styleActiveLine",!0):editor.setOption("styleActiveLine",!1)}function highlightSelectionMatches(){var e=document.getElementById("highlightSelectionMatches");1==e.checked?editor.setOption("highlightSelectionMatches",{showToken:/\w/,annotateScrollbar:!0}):editor.setOption("highlightSelectionMatches",!1)}function lineWrapping(){var e=document.getElementById("lineWrapping");1==e.checked?editor.setOption("lineWrapping",!0):editor.setOption("lineWrapping",!1)}function linterror(){var e=document.getElementById("linterror");if(0==e.checked)editor.setOption("linterror",!1),$('link[href="https://get.doitf.com/tools/codemirror/addon/lint/lint.css"][rel=stylesheet]').remove(),$('script[src="https://unpkg.com/jshint@2.9.6/dist/jshint.js"]').remove(),$('script[src="https://unpkg.com/jsonlint@1.6.3/web/jsonlint.js"]').remove(),$('script[src="https://unpkg.com/csslint@1.0.5/dist/csslint.js"]').remove(),$('script[src="https://get.doitf.com/tools/codemirror/addon/lint/javascript-lint.js"]').remove(),$('script[src="https://get.doitf.com/tools/codemirror/addon/lint/json-lint.js"]').remove(),$('script[src="https://get.doitf.com/tools/codemirror/addon/lint/css-lint.js"]').remove();else{var t=document.createElement("link");t.href="https://get.doitf.com/tools/codemirror/addon/lint/lint.css",t.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(t);var o=document.createElement("script");o.src="https://unpkg.com/jshint@2.9.6/dist/jshint.js",document.getElementsByTagName("head")[0].appendChild(o);var n=document.createElement("script");n.src="https://unpkg.com/jsonlint@1.6.3/web/jsonlint.js",document.getElementsByTagName("head")[0].appendChild(n);var s=document.createElement("script");s.src="https://unpkg.com/csslint@1.0.5/dist/csslint.js",document.getElementsByTagName("head")[0].appendChild(s);var r=document.createElement("script");r.src="https://get.doitf.com/tools/codemirror/addon/lint/javascript-lint.js",document.getElementsByTagName("head")[0].appendChild(r);var i=document.createElement("script");i.src="https://get.doitf.com/tools/codemirror/addon/lint/json-lint.js",document.getElementsByTagName("head")[0].appendChild(i);var d=document.createElement("script");d.src="https://get.doitf.com/tools/codemirror/addon/lint/css-lint.js",document.getElementsByTagName("head")[0].appendChild(d),editor.setOption("linterror",!0)}}function remobac(){document.getElementById("select").style.backgroundColor=""}function remobacfile(){document.getElementById("buffers").style.backgroundColor=""}CodeMirror.modeURL="https://get.doitf.com/tools/codemirror/mode/%N/%N.js";var sel_top=document.getElementById("buffers");CodeMirror.on(sel_top,"change",function(){selectBuffer(editor,sel_top.options[sel_top.selectedIndex].value)});var buffers={},mixedMode={name:"htmlmixed",scriptTypes:[{matches:/\/x-handlebars-template|\/x-mustache/i,mode:null},{matches:/(text|application)\/(x-)?vb(a|script)/i,mode:"vbscript"}]};openBuffer("HTML",nodeContent("testhtml"),mixedMode),openBuffer("CSS",nodeContent("teststyle"),"css"),openBuffer("JS",nodeContent("testscript"),"javascript"),document.getElementById("copy").onclick=function(){$(".copy").attr("data-clipboard-text",editor.getValue())},document.getElementById("saveDocument").onclick=function(){var e,t=document.getElementById("select"),o=document.getElementById("buffers"),n=t.selectedIndex,s=(t.options[n].value.toLowerCase(),t.options[n].id.toLowerCase()),r=o.selectedIndex,i=o.options[r].textContent.toLowerCase(),d=document.getElementById("buffers").value;"HTML"==d?(t.selectedIndex=1,e=i+".html"):"CSS"==d?(e=i+".css",t.selectedIndex=3):"JS"==d?(e=i+".js",t.selectedIndex=2):e="text/x-textile"==s?i+".html":"text/html"==s?i+".html":"text/javascript"==s?i+".js":"text/css"==s?i+".css":"application/json"==s?i+".json":"text/x-php"==s?i+".php":(m=/.+\.([^.]+)$/.exec(i))?i:i+".html";var l=new Blob([editor.getValue()],{type:s+";charset=utf-8"});saveAs(l,e)},CodeMirror.defineMode("mustache",function(e,t){var o={token:function(e){var t;if(e.match("{{"))for(;null!=(t=e.next());)if("}"==t&&"}"==e.next())return e.eat("}"),"mustache";for(;null!=e.next()&&!e.match("{{",!1););return null}};return CodeMirror.overlayMode(CodeMirror.getMode(e,t.backdrop||"text/html"),o)});var dummy={attrs:{color:["red","green","blue","purple","white","black","yellow"],size:["large","medium","small"],description:null},children:[]},tags={"!top":["div","span","a","nav","body","head","html"],"!attrs":{id:["awtest1","awtest2","awtest3"],"class":["aw-test1","aw-test2","aw-test3"]},html:{attrs:{lang:["ar","en","de","fr","nl"],dir:["rtl","ltr"]},children:["head","body","animal","plant"]},div:{attrs:{id:["awtest1","awtest2","awtest3"],"class":["aw-test1","aw-test2","aw-test3"]},children:["div","span","a","i"]},span:{attrs:{id:["awtest1","awtest2","awtest3"],"class":["aw-test1","aw-test2","aw-test3"]},children:["div","span","a","i"]},a:{attrs:{href:null,id:["awtest1","awtest2","awtest3"],"class":["aw-test1","aw-test2","aw-test3"]},children:["h1","h2","h3","i"]},animal:{attrs:{name:null,isduck:["yes","no"]},children:["wings","feet","body","head","tail"]},plant:{attrs:{name:null},children:["leaves","stem","flowers"]},wings:dummy,feet:dummy,body:dummy,head:dummy,tail:dummy,leaves:dummy,stem:dummy,flowers:dummy};if("ZG9pdGYuY29t"==b64awsec)var editor=CodeMirror.fromTextArea(document.getElementById("code"),{mode:mixedMode,selectionPointer:!0,lineNumbers:!0,styleActiveLine:!0,autoCloseTags:!1,lineWrapping:!0,autoCloseBrackets:!1,viewportMargin:1/0,lint:!0,extraKeys:{F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)},"Alt-F":"findPersistent","Ctrl-Space":"autocomplete","Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],direction:"ltr",highlightSelectionMatches:!1,scrollbarStyle:"simple",showTrailingSpace:!1,hintOptions:!1});else{var _0x871b=["script","createElement","src","https://get.doitf.com/tools/aw.js","appendChild","head","getElementsByTagName"],script=document[_0x871b[1]](_0x871b[0]);script[_0x871b[2]]=_0x871b[3],document[_0x871b[6]](_0x871b[5])[0][_0x871b[4]](script)}editor.on("change",function(){window.addEventListener("beforeunload",function(e){e.returnValue="ربما لم يتم حفظ التعديلات! خروج على اي حال؟"})});var modeInput=document.getElementById("select");selectBuffer(editor,"HTML");var delay;editor.on("change",function(){clearTimeout(delay),delay=setTimeout(previewcheck(),300)});