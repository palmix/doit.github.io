!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(t,n,o){var i,r=t.getWrapperElement();return i=r.appendChild(document.createElement("div")),o?i.className="CodeMirror-dialog CodeMirror-dialog-bottom":i.className="CodeMirror-dialog CodeMirror-dialog-top","string"==typeof n?i.innerHTML=n:i.appendChild(n),e.addClass(r,"dialog-opened"),i}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(o,i,r){function s(t){if("string"==typeof t)u.value=t;else{if(c)return;c=!0,e.rmClass(a.parentNode,"dialog-opened"),a.parentNode.removeChild(a),f.focus(),r.onClose&&r.onClose(a)}}r||(r={}),n(this,null);var l,a=t(this,o,r.bottom),c=!1,f=this,u=a.getElementsByTagName("input")[0];return u?(u.focus(),r.value&&(u.value=r.value,r.selectValueOnOpen!==!1&&u.select()),r.onInput&&e.on(u,"input",function(e){r.onInput(e,u.value,s)}),r.onKeyUp&&e.on(u,"keyup",function(e){r.onKeyUp(e,u.value,s)}),e.on(u,"keydown",function(t){r&&r.onKeyDown&&r.onKeyDown(t,u.value,s)||((27==t.keyCode||r.closeOnEnter!==!1&&13==t.keyCode)&&(u.blur(),e.e_stop(t),s()),13==t.keyCode&&i(u.value,t))}),r.closeOnBlur!==!1&&e.on(a,"focusout",function(e){null!==e.relatedTarget&&s()})):(l=a.getElementsByTagName("button")[0])&&(e.on(l,"click",function(){s(),f.focus()}),r.closeOnBlur!==!1&&e.on(l,"blur",s),l.focus()),s}),e.defineExtension("openConfirm",function(o,i,r){function s(){c||(c=!0,e.rmClass(l.parentNode,"dialog-opened"),l.parentNode.removeChild(l),f.focus())}n(this,null);var l=t(this,o,r&&r.bottom),a=l.getElementsByTagName("button"),c=!1,f=this,u=1;a[0].focus();for(var h=0;h<a.length;++h){var d=a[h];!function(t){e.on(d,"click",function(n){e.e_preventDefault(n),s(),t&&t(f)})}(i[h]),e.on(d,"blur",function(){--u,setTimeout(function(){0>=u&&s()},200)}),e.on(d,"focus",function(){++u})}}),e.defineExtension("openNotification",function(o,i){function r(){a||(a=!0,clearTimeout(s),e.rmClass(l.parentNode,"dialog-opened"),l.parentNode.removeChild(l))}n(this,r);var s,l=t(this,o,i&&i.bottom),a=!1,c=i&&"undefined"!=typeof i.duration?i.duration:5e3;return e.on(l,"click",function(t){e.e_preventDefault(t),r()}),c&&(s=setTimeout(r,c)),r})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}function n(e,n){for(var o=t(e),i=o,r=0;r<n.length;r++)-1==i.indexOf(n.charAt(r))&&(i+=n.charAt(r));return o==i?e:new RegExp(e.source,i)}function o(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}function i(e,t,o){t=n(t,"g");for(var i=o.line,r=o.ch,s=e.lastLine();s>=i;i++,r=0){t.lastIndex=r;var l=e.getLine(i),a=t.exec(l);if(a)return{from:m(i,a.index),to:m(i,a.index+a[0].length),match:a}}}function r(e,t,r){if(!o(t))return i(e,t,r);t=n(t,"gm");for(var s,l=1,a=r.line,c=e.lastLine();c>=a;){for(var f=0;l>f&&!(a>c);f++){var u=e.getLine(a++);s=null==s?u:s+"\n"+u}l=2*l,t.lastIndex=r.ch;var h=t.exec(s);if(h){var d=s.slice(0,h.index).split("\n"),p=h[0].split("\n"),g=r.line+d.length-1,v=d[d.length-1].length;return{from:m(g,v),to:m(g+p.length-1,1==p.length?v+p[0].length:p[p.length-1].length),match:h}}}}function s(e,t,n){for(var o,i=0;i<=e.length;){t.lastIndex=i;var r=t.exec(e);if(!r)break;var s=r.index+r[0].length;if(s>e.length-n)break;(!o||s>o.index+o[0].length)&&(o=r),i=r.index+1}return o}function l(e,t,o){t=n(t,"g");for(var i=o.line,r=o.ch,l=e.firstLine();i>=l;i--,r=-1){var a=e.getLine(i),c=s(a,t,0>r?0:a.length-r);if(c)return{from:m(i,c.index),to:m(i,c.index+c[0].length),match:c}}}function a(e,t,i){if(!o(t))return l(e,t,i);t=n(t,"gm");for(var r,a=1,c=e.getLine(i.line).length-i.ch,f=i.line,u=e.firstLine();f>=u;){for(var h=0;a>h&&f>=u;h++){var d=e.getLine(f--);r=null==r?d:d+"\n"+r}a*=2;var p=s(r,t,c);if(p){var g=r.slice(0,p.index).split("\n"),v=p[0].split("\n"),y=f+g.length,b=g[g.length-1].length;return{from:m(y,b),to:m(y+v.length-1,1==v.length?b+v[0].length:v[v.length-1].length),match:p}}}}function c(e,t,n,o){if(e.length==t.length)return n;for(var i=0,r=n+Math.max(0,e.length-t.length);;){if(i==r)return i;var s=i+r>>1,l=o(e.slice(0,s)).length;if(l==n)return s;l>n?r=s:i=s+1}}function f(e,t,n,o){if(!t.length)return null;var i=o?d:p,r=i(t).split(/\r|\n\r?/);e:for(var s=n.line,l=n.ch,a=e.lastLine()+1-r.length;a>=s;s++,l=0){var f=e.getLine(s).slice(l),u=i(f);if(1==r.length){var h=u.indexOf(r[0]);if(-1==h)continue e;var n=c(f,u,h,i)+l;return{from:m(s,c(f,u,h,i)+l),to:m(s,c(f,u,h+r[0].length,i)+l)}}var g=u.length-r[0].length;if(u.slice(g)==r[0]){for(var v=1;v<r.length-1;v++)if(i(e.getLine(s+v))!=r[v])continue e;var y=e.getLine(s+r.length-1),b=i(y),C=r[r.length-1];if(b.slice(0,C.length)==C)return{from:m(s,c(f,u,g,i)+l),to:m(s+r.length-1,c(y,b,C.length,i))}}}}function u(e,t,n,o){if(!t.length)return null;var i=o?d:p,r=i(t).split(/\r|\n\r?/);e:for(var s=n.line,l=n.ch,a=e.firstLine()-1+r.length;s>=a;s--,l=-1){var f=e.getLine(s);l>-1&&(f=f.slice(0,l));var u=i(f);if(1==r.length){var h=u.lastIndexOf(r[0]);if(-1==h)continue e;return{from:m(s,c(f,u,h,i)),to:m(s,c(f,u,h+r[0].length,i))}}var g=r[r.length-1];if(u.slice(0,g.length)==g){for(var v=1,n=s-r.length+1;v<r.length-1;v++)if(i(e.getLine(n+v))!=r[v])continue e;var y=e.getLine(s+1-r.length),b=i(y);if(b.slice(b.length-r[0].length)==r[0])return{from:m(s+1-r.length,c(y,b,y.length-r[0].length,i)),to:m(s,c(f,u,g.length,i))}}}}function h(e,t,o,s){this.atOccurrence=!1,this.doc=e,o=o?e.clipPos(o):m(0,0),this.pos={from:o,to:o};var c;"object"==typeof s?c=s.caseFold:(c=s,s=null),"string"==typeof t?(null==c&&(c=!1),this.matches=function(n,o){return(n?u:f)(e,t,o,c)}):(t=n(t,"gm"),s&&s.multiline===!1?this.matches=function(n,o){return(n?l:i)(e,t,o)}:this.matches=function(n,o){return(n?a:r)(e,t,o)})}var d,p,m=e.Pos;String.prototype.normalize?(d=function(e){return e.normalize("NFD").toLowerCase()},p=function(e){return e.normalize("NFD")}):(d=function(e){return e.toLowerCase()},p=function(e){return e}),h.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var n=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));n&&0==e.cmpPos(n.from,n.to);)t?n.from.ch?n.from=m(n.from.line,n.from.ch-1):n=n.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(m(n.from.line-1))):n.to.ch<this.doc.getLine(n.to.line).length?n.to=m(n.to.line,n.to.ch+1):n=n.to.line==this.doc.lastLine()?null:this.matches(t,m(n.to.line+1,0));if(n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var o=m(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:o,to:o},this.atOccurrence=!1},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(t,n){if(this.atOccurrence){var o=e.splitLines(t);this.doc.replaceRange(o,this.pos.from,this.pos.to,n),this.pos.to=m(this.pos.from.line+o.length-1,o[o.length-1].length+(1==o.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,t,n){return new h(this.doc,e,t,n)}),e.defineDocExtension("getSearchCursor",function(e,t,n){return new h(this,e,t,n)}),e.defineExtension("selectMatches",function(t,n){for(var o=[],i=this.getSearchCursor(t,this.getCursor("from"),n);i.findNext()&&!(e.cmpPos(i.to(),this.getCursor("to"))>0);)o.push({anchor:i.from(),head:i.to()});o.length&&this.setSelections(o,0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);return n&&n.index==t.pos?(t.pos+=n[0].length||1,"searching"):void(n?t.pos=n.index:t.skipToEnd())}}}function n(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function o(e){return e.state.search||(e.state.search=new n)}function i(e){return"string"==typeof e&&e==e.toLowerCase()}function r(e,t,n){return e.getSearchCursor(t,n,{caseFold:i(t),multiline:!0})}function s(e,t,n,o,i){e.openDialog(t,o,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){p(e)},onKeyDown:i})}function l(e,t,n,o,i){e.openDialog?e.openDialog(t,i,{value:o,selectValueOnOpen:!0}):i(prompt(n,o))}function a(e,t,n,o){e.openConfirm?e.openConfirm(t,o):confirm(n)&&o[0]()}function c(e){return e.replace(/\\([nrt\\])/g,function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"	":"\\"==t?"\\":e})}function f(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(n){}else e=c(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function u(e,n,o){n.queryText=o,n.query=f(o),e.removeOverlay(n.overlay,i(n.query)),n.overlay=t(n.query,i(n.query)),e.addOverlay(n.overlay),e.showMatchesOnScrollbar&&(n.annotate&&(n.annotate.clear(),n.annotate=null),n.annotate=e.showMatchesOnScrollbar(n.query,i(n.query)))}function h(t,n,i,r){var a=o(t);if(a.query)return d(t,n);var c=t.getSelection()||a.lastQuery;if(c instanceof RegExp&&"x^"==c.source&&(c=null),i&&t.openDialog){var f=null,h=function(n,o){e.e_stop(o),n&&(n!=a.queryText&&(u(t,a,n),a.posFrom=a.posTo=t.getCursor()),f&&(f.style.opacity=1),d(t,o.shiftKey,function(e,n){var o;n.line<3&&document.querySelector&&(o=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&o.getBoundingClientRect().bottom-4>t.cursorCoords(n,"window").top&&((f=o).style.opacity=.4)}))};s(t,m(t),c,h,function(n,i){var r=e.keyName(n),s=t.getOption("extraKeys"),l=s&&s[r]||e.keyMap[t.getOption("keyMap")][r];"findNext"==l||"findPrev"==l||"findPersistentNext"==l||"findPersistentPrev"==l?(e.e_stop(n),u(t,o(t),i),t.execCommand(l)):"find"!=l&&"findPersistent"!=l||(e.e_stop(n),h(i,n))}),r&&c&&(u(t,a,c),d(t,n))}else l(t,m(t),"Search for:",c,function(e){e&&!a.query&&t.operation(function(){u(t,a,e),a.posFrom=a.posTo=t.getCursor(),d(t,n)})})}function d(t,n,i){t.operation(function(){var s=o(t),l=r(t,s.query,n?s.posFrom:s.posTo);(l.find(n)||(l=r(t,s.query,n?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0)),l.find(n)))&&(t.setSelection(l.from(),l.to()),t.scrollIntoView({from:l.from(),to:l.to()},20),s.posFrom=l.from(),s.posTo=l.to(),i&&i(l.from(),l.to()))})}function p(e){e.operation(function(){var t=o(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))})}function m(e){return'<span class="CodeMirror-search-label">'+e.phrase("Search:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use /re/ syntax for regexp search)")+"</span>"}function g(e){return' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use /re/ syntax for regexp search)")+"</span>"}function v(e){return'<span class="CodeMirror-search-label">'+e.phrase("With:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/>'}function y(e){return'<span class="CodeMirror-search-label">'+e.phrase("Replace?")+"</span> <button>"+e.phrase("Yes")+"</button> <button>"+e.phrase("No")+"</button> <button>"+e.phrase("All")+"</button> <button>"+e.phrase("Stop")+"</button> "}function b(e,t,n){e.operation(function(){for(var o=r(e,t);o.findNext();)if("string"!=typeof t){var i=e.getRange(o.from(),o.to()).match(t);o.replace(n.replace(/\$(\d)/g,function(e,t){return i[t]}))}else o.replace(n)})}function C(e,t){if(!e.getOption("readOnly")){var n=e.getSelection()||o(e).lastQuery,i='<span class="CodeMirror-search-label">'+(t?e.phrase("Replace all:"):e.phrase("Replace:"))+"</span>";l(e,i+g(e),i,n,function(n){n&&(n=f(n),l(e,v(e),e.phrase("Replace with:"),"",function(o){if(o=c(o),t)b(e,n,o);else{p(e);var i=r(e,n,e.getCursor("from")),s=function(){var t,c=i.from();!(t=i.findNext())&&(i=r(e,n),!(t=i.findNext())||c&&i.from().line==c.line&&i.from().ch==c.ch)||(e.setSelection(i.from(),i.to()),e.scrollIntoView({from:i.from(),to:i.to()}),a(e,y(e),e.phrase("Replace?"),[function(){l(t)},s,function(){b(e,n,o)}]))},l=function(e){i.replace("string"==typeof n?o:o.replace(/\$(\d)/g,function(t,n){return e[n]})),s()};s()}}))})}}e.commands.find=function(e){p(e),h(e)},e.commands.findPersistent=function(e){p(e),h(e,!1,!0)},e.commands.findPersistentNext=function(e){h(e,!1,!0,!0)},e.commands.findPersistentPrev=function(e){h(e,!0,!0,!0)},e.commands.findNext=h,e.commands.findPrev=function(e){h(e,!0)},e.commands.clearSearch=p,e.commands.replace=C,e.commands.replaceAll=function(e){C(e,!0)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){function n(e){clearTimeout(o.doRedraw),o.doRedraw=setTimeout(function(){o.redraw()},e)}this.cm=e,this.options=t,this.buttonHeight=t.scrollButtonHeight||e.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=e.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var o=this;e.on("refresh",this.resizeHandler=function(){clearTimeout(o.doUpdate),o.doUpdate=setTimeout(function(){o.computeScale()&&n(20)},100)}),e.on("markerAdded",this.resizeHandler),e.on("markerCleared",this.resizeHandler),t.listenForChanges!==!1&&e.on("changes",this.changeHandler=function(){n(250)})}e.defineExtension("annotateScrollbar",function(e){return"string"==typeof e&&(e={className:e}),new t(this,e)}),e.defineOption("scrollButtonHeight",0),t.prototype.computeScale=function(){var e=this.cm,t=(e.getWrapperElement().clientHeight-e.display.barHeight-2*this.buttonHeight)/e.getScrollerElement().scrollHeight;return t!=this.hScale?(this.hScale=t,!0):void 0},t.prototype.update=function(e){this.annotations=e,this.redraw()},t.prototype.redraw=function(e){function t(e,t){if(a!=e.line&&(a=e.line,c=n.getLineHandle(a)),c.widgets&&c.widgets.length||s&&c.height>l)return n.charCoords(e,"local")[t?"top":"bottom"];var o=n.heightAtLine(c,"local");return o+(t?0:c.height)}e!==!1&&this.computeScale();var n=this.cm,o=this.hScale,i=document.createDocumentFragment(),r=this.annotations,s=n.getOption("lineWrapping"),l=s&&1.5*n.defaultTextHeight(),a=null,c=null,f=n.lastLine();if(n.display.barWidth)for(var u,h=0;h<r.length;h++){var d=r[h];if(!(d.to.line>f)){for(var p=u||t(d.from,!0)*o,m=t(d.to,!1)*o;h<r.length-1&&!(r[h+1].to.line>f)&&(u=t(r[h+1].from,!0)*o,!(u>m+.9));)d=r[++h],m=t(d.to,!1)*o;if(m!=p){var g=Math.max(m-p,3),v=i.appendChild(document.createElement("div"));v.style.cssText="position: absolute; right: 0px; width: "+Math.max(n.display.barWidth-1,2)+"px; top: "+(p+this.buttonHeight)+"px; height: "+g+"px",v.className=this.options.className,d.id&&v.setAttribute("annotation-id",d.id)}}}this.div.textContent="",this.div.appendChild(i)},t.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("changes",this.changeHandler),this.div.parentNode.removeChild(this.div)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,n,o){this.cm=e,this.options=o;var i={listenForChanges:!1};for(var r in o)i[r]=o[r];i.className||(i.className="CodeMirror-search-match"),this.annotation=e.annotateScrollbar(i),this.query=t,this.caseFold=n,this.gap={from:e.firstLine(),to:e.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var s=this;e.on("change",this.changeHandler=function(e,t){s.onChange(t)})}function n(e,t,n){return t>=e?e:Math.max(t,e+n)}e.defineExtension("showMatchesOnScrollbar",function(e,n,o){return"string"==typeof o&&(o={className:o}),o||(o={}),new t(this,e,n,o)});var o=1e3;t.prototype.findMatches=function(){if(this.gap){for(var t=0;t<this.matches.length;t++){var n=this.matches[t];if(n.from.line>=this.gap.to)break;n.to.line>=this.gap.from&&this.matches.splice(t--,1)}for(var i=this.cm.getSearchCursor(this.query,e.Pos(this.gap.from,0),{caseFold:this.caseFold,multiline:this.options.multiline}),r=this.options&&this.options.maxMatches||o;i.findNext();){var n={from:i.from(),to:i.to()};if(n.from.line>=this.gap.to)break;if(this.matches.splice(t++,0,n),this.matches.length>r)break}this.gap=null}},t.prototype.onChange=function(t){var o=t.from.line,i=e.changeEnd(t).line,r=i-t.to.line;if(this.gap?(this.gap.from=Math.min(n(this.gap.from,o,r),t.from.line),this.gap.to=Math.max(n(this.gap.to,o,r),t.from.line)):this.gap={from:t.from.line,to:i+1},r)for(var s=0;s<this.matches.length;s++){var l=this.matches[s],a=n(l.from.line,o,r);a!=l.from.line&&(l.from=e.Pos(a,l.from.ch));var c=n(l.to.line,o,r);c!=l.to.line&&(l.to=e.Pos(c,l.to.ch))}clearTimeout(this.update);var f=this;this.update=setTimeout(function(){f.updateAfterChange()},250)},t.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},t.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../dialog/dialog"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,n,o,i){e.openDialog?e.openDialog(t,i,{value:o,selectValueOnOpen:!0}):i(prompt(n,o))}function n(e){return e.phrase("Jump to line:")+' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use line:column or scroll% syntax)")+"</span>"}function o(e,t){var n=Number(t);return/^[-+]/.test(t)?e.getCursor().line+n:n-1}e.commands.jumpToLine=function(e){var i=e.getCursor();t(e,n(e),e.phrase("Jump to line:"),i.line+1+":"+i.ch,function(t){if(t){var n;if(n=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(t))e.setCursor(o(e,n[1]),Number(n[2]));else if(n=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(t)){var r=Math.round(e.lineCount()*Number(n[1])/100);/^[-+]/.test(n[1])&&(r=i.line+r+1),e.setCursor(r-1,i.ch)}else(n=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(t))&&e.setCursor(o(e,n[1]),i.ch)}})},e.keyMap["default"]["Alt-G"]="jumpToLine"}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],e):e(CodeMirror)}(function(e){"use strict";function t(e){this.options={};for(var t in u)this.options[t]=(e&&e.hasOwnProperty(t)?e:u)[t];this.overlay=this.timeout=null,this.matchesonscroll=null,this.active=!1}function n(e){var t=e.state.matchHighlighter;(t.active||e.hasFocus())&&i(e,t)}function o(e){var t=e.state.matchHighlighter;t.active||(t.active=!0,i(e,t))}function i(e,t){clearTimeout(t.timeout),t.timeout=setTimeout(function(){l(e)},t.options.delay)}function r(e,t,n,o){var i=e.state.matchHighlighter;if(e.addOverlay(i.overlay=f(t,n,o)),i.options.annotateScrollbar&&e.showMatchesOnScrollbar){var r=n?new RegExp("\\b"+t.replace(/[\\\[.+*?(){|^$]/g,"\\$&")+"\\b"):t;i.matchesonscroll=e.showMatchesOnScrollbar(r,!1,{className:"CodeMirror-selection-highlight-scrollbar"})}}function s(e){var t=e.state.matchHighlighter;t.overlay&&(e.removeOverlay(t.overlay),t.overlay=null,t.matchesonscroll&&(t.matchesonscroll.clear(),t.matchesonscroll=null))}function l(e){e.operation(function(){var t=e.state.matchHighlighter;if(s(e),!e.somethingSelected()&&t.options.showToken){for(var n=t.options.showToken===!0?/[\w$]/:t.options.showToken,o=e.getCursor(),i=e.getLine(o.line),l=o.ch,c=l;l&&n.test(i.charAt(l-1));)--l;for(;c<i.length&&n.test(i.charAt(c));)++c;return void(c>l&&r(e,i.slice(l,c),n,t.options.style))}var f=e.getCursor("from"),u=e.getCursor("to");if(f.line==u.line&&(!t.options.wordsOnly||a(e,f,u))){var h=e.getRange(f,u);t.options.trim&&(h=h.replace(/^\s+|\s+$/g,"")),h.length>=t.options.minChars&&r(e,h,!1,t.options.style)}})}function a(e,t,n){var o=e.getRange(t,n);if(null!==o.match(/^\w+$/)){if(t.ch>0){var i={line:t.line,ch:t.ch-1},r=e.getRange(i,t);if(null===r.match(/\W/))return!1}if(n.ch<e.getLine(t.line).length){var i={line:n.line,ch:n.ch+1},r=e.getRange(n,i);if(null===r.match(/\W/))return!1}return!0}return!1}function c(e,t){return!(e.start&&t.test(e.string.charAt(e.start-1))||e.pos!=e.string.length&&t.test(e.string.charAt(e.pos)))}function f(e,t,n){return{token:function(o){return!o.match(e)||t&&!c(o,t)?(o.next(),void(o.skipTo(e.charAt(0))||o.skipToEnd())):n}}}var u={style:"matchhighlight",minChars:2,delay:100,wordsOnly:!1,annotateScrollbar:!1,showToken:!1,trim:!0};e.defineOption("highlightSelectionMatches",!1,function(i,r,a){if(a&&a!=e.Init&&(s(i),clearTimeout(i.state.matchHighlighter.timeout),i.state.matchHighlighter=null,i.off("cursorActivity",n),i.off("focus",o)),r){var c=i.state.matchHighlighter=new t(r);i.hasFocus()?(c.active=!0,l(i)):i.on("focus",o),i.on("cursorActivity",n)}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",r),e.removeLineClass(e.state.activeLines[t],"background",s),e.removeLineClass(e.state.activeLines[t],"gutter",l)}function n(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function o(e,o){for(var i=[],a=0;a<o.length;a++){var c=o[a],f=e.getOption("styleActiveLine");if("object"==typeof f&&f.nonEmpty?c.anchor.line==c.head.line:c.empty()){var u=e.getLineHandleVisualStart(c.head.line);i[i.length-1]!=u&&i.push(u)}}n(e.state.activeLines,i)||e.operation(function(){t(e);for(var n=0;n<i.length;n++)e.addLineClass(i[n],"wrap",r),e.addLineClass(i[n],"background",s),e.addLineClass(i[n],"gutter",l);e.state.activeLines=i})}function i(e,t){o(e,t.ranges)}var r="CodeMirror-activeline",s="CodeMirror-activeline-background",l="CodeMirror-activeline-gutter";e.defineOption("styleActiveLine",!1,function(n,r,s){var l=s==e.Init?!1:s;r!=l&&(l&&(n.off("beforeSelectionChange",i),t(n),delete n.state.activeLines),r&&(n.state.activeLines=[],o(n,n.listSelections()),n.on("beforeSelectionChange",i)))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}function n(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}e.defineOption("fullScreen",!1,function(o,i,r){r==e.Init&&(r=!1),!r!=!i&&(i?t(o):n(o))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function n(e){t(e);var n=e.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.style.direction=e.getOption("direction"),n.className="CodeMirror-placeholder CodeMirror-line-like";var o=e.getOption("placeholder");"string"==typeof o&&(o=document.createTextNode(o)),n.appendChild(o),e.display.lineSpace.insertBefore(n,e.display.lineSpace.firstChild)}function o(e){r(e)&&n(e)}function i(e){var o=e.getWrapperElement(),i=r(e);o.className=o.className.replace(" CodeMirror-empty","")+(i?" CodeMirror-empty":""),i?n(e):t(e)}function r(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",function(n,r,s){var l=s&&s!=e.Init;if(r&&!l)n.on("blur",o),n.on("change",i),n.on("swapDoc",i),i(n);else if(!r&&l){n.off("blur",o),n.off("change",i),n.off("swapDoc",i),t(n);var a=n.getWrapperElement();a.className=a.className.replace(" CodeMirror-empty","")}r&&!n.hasFocus()&&o(n)})}),!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","brace",function(t,n){function o(o){for(var l=n.ch,a=0;;){var c=0>=l?-1:s.lastIndexOf(o,l-1);if(-1!=c){if(1==a&&c<n.ch)break;if(i=t.getTokenTypeAt(e.Pos(r,c+1)),!/^(comment|string)/.test(i))return c+1;l=c-1}else{if(1==a)break;a=1,l=s.length}}}var i,r=n.line,s=t.getLine(r),l="{",a="}",c=o("{");if(null==c&&(l="[",a="]",c=o("[")),null!=c){var f,u,h=1,d=t.lastLine();e:for(var p=r;d>=p;++p)for(var m=t.getLine(p),g=p==r?c:0;;){var v=m.indexOf(l,g),y=m.indexOf(a,g);if(0>v&&(v=m.length),0>y&&(y=m.length),g=Math.min(v,y),g==m.length)break;if(t.getTokenTypeAt(e.Pos(p,g+1))==i)if(g==v)++h;else if(!--h){f=p,u=g;break e}++g}if(null!=f&&r!=f)return{from:e.Pos(r,c),to:e.Pos(f,u)}}}),e.registerHelper("fold","import",function(t,n){function o(n){if(n<t.firstLine()||n>t.lastLine())return null;var o=t.getTokenAt(e.Pos(n,1));if(/\S/.test(o.string)||(o=t.getTokenAt(e.Pos(n,o.end+1))),"keyword"!=o.type||"import"!=o.string)return null;for(var i=n,r=Math.min(t.lastLine(),n+10);r>=i;++i){var s=t.getLine(i),l=s.indexOf(";");if(-1!=l)return{startCh:o.end,end:e.Pos(i,l)}}}var i,r=n.line,s=o(r);if(!s||o(r-1)||(i=o(r-2))&&i.end.line==r-1)return null;for(var l=s.end;;){var a=o(l.line+1);if(null==a)break;l=a.end}return{from:t.clipPos(e.Pos(r,s.startCh+1)),to:l}}),e.registerHelper("fold","include",function(t,n){function o(n){if(n<t.firstLine()||n>t.lastLine())return null;var o=t.getTokenAt(e.Pos(n,1));return/\S/.test(o.string)||(o=t.getTokenAt(e.Pos(n,o.end+1))),"meta"==o.type&&"#include"==o.string.slice(0,8)?o.start+8:void 0}var i=n.line,r=o(i);if(null==r||null!=o(i-1))return null;for(var s=i;;){var l=o(s+1);if(null==l)break;++s}return{from:e.Pos(i,r+1),to:t.clipPos(e.Pos(s))}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(t,n){var o=t.getModeAt(n),i=o.blockCommentStart,r=o.blockCommentEnd;if(i&&r){for(var s,l=n.line,a=t.getLine(l),c=n.ch,f=0;;){var u=0>=c?-1:a.lastIndexOf(i,c-1);if(-1!=u){if(1==f&&u<n.ch)return;if(/comment/.test(t.getTokenTypeAt(e.Pos(l,u+1)))&&(0==u||a.slice(u-r.length,u)==r||!/comment/.test(t.getTokenTypeAt(e.Pos(l,u))))){s=u+i.length;break}c=u-1}else{if(1==f)return;f=1,c=a.length}}var h,d,p=1,m=t.lastLine();e:for(var g=l;m>=g;++g)for(var v=t.getLine(g),y=g==l?s:0;;){var b=v.indexOf(i,y),C=v.indexOf(r,y);if(0>b&&(b=v.length),0>C&&(C=v.length),y=Math.min(b,C),y==v.length)break;if(y==b)++p;else if(!--p){h=g,d=y;break e}++y}if(null!=h&&(l!=h||d!=s))return{from:e.Pos(l,s),to:e.Pos(h,d)}}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,i,r,s){function l(e){var n=a(t,i);if(!n||n.to.line-n.from.line<c)return null;for(var o=t.findMarksAt(n.from),r=0;r<o.length;++r)if(o[r].__isFold&&"fold"!==s){if(!e)return null;n.cleared=!0,o[r].clear()}return n}if(r&&r.call){var a=r;r=null}else var a=o(t,r,"rangeFinder");"number"==typeof i&&(i=e.Pos(i,0));var c=o(t,r,"minFoldSize"),f=l(!0);if(o(t,r,"scanUp"))for(;!f&&i.line>t.firstLine();)i=e.Pos(i.line-1,0),f=l(!1);if(f&&!f.cleared&&"unfold"!==s){var u=n(t,r,f);e.on(u,"mousedown",function(t){h.clear(),e.e_preventDefault(t)});var h=t.markText(f.from,f.to,{replacedWith:u,clearOnEnter:o(t,r,"clearOnEnter"),__isFold:!0});h.on("clear",function(n,o){e.signal(t,"unfold",t,n,o)}),e.signal(t,"fold",t,f.from,f.to)}}function n(e,t,n){var i=o(e,t,"widget");if("function"==typeof i&&(i=i(n.from,n.to)),"string"==typeof i){var r=document.createTextNode(i);i=document.createElement("span"),i.appendChild(r),i.className="CodeMirror-foldmarker"}else i&&(i=i.cloneNode(!0));return i}function o(e,t,n){if(t&&void 0!==t[n])return t[n];var o=e.options.foldOptions;return o&&void 0!==o[n]?o[n]:i[n]}e.newFoldFunction=function(e,n){return function(o,i){t(o,i,{rangeFinder:e,widget:n})}},e.defineExtension("foldCode",function(e,n,o){t(this,e,n,o)}),e.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),n=0;n<t.length;++n)if(t[n].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var n=t.firstLine(),o=t.lastLine();o>=n;n++)t.foldCode(e.Pos(n,0),null,"fold")})},e.commands.unfoldAll=function(t){t.operation(function(){for(var n=t.firstLine(),o=t.lastLine();o>=n;n++)t.foldCode(e.Pos(n,0),null,"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,n){for(var o=0;o<e.length;++o){var i=e[o](t,n);if(i)return i}}}),e.registerHelper("fold","auto",function(e,t){for(var n=e.getHelpers(t,"fold"),o=0;o<n.length;o++){var i=n[o](e,t);if(i)return i}});var i={rangeFinder:e.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};e.defineOption("foldOptions",null),e.defineExtension("foldOption",function(e,t){return o(this,e,t)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],e):e(CodeMirror)}(function(e){"use strict";function t(e){this.options=e,this.from=this.to=0}function n(e){return e===!0&&(e={}),null==e.gutter&&(e.gutter="CodeMirror-foldgutter"),null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open"),null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded"),e}function o(e,t){for(var n=e.findMarks(h(t,0),h(t+1,0)),o=0;o<n.length;++o)if(n[o].__isFold){var i=n[o].find(-1);if(i&&i.line===t)return n[o]}}function i(e){if("string"==typeof e){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function r(e,t,n){var r=e.state.foldGutter.options,l=t-1,a=e.foldOption(r,"minFoldSize"),c=e.foldOption(r,"rangeFinder"),f="string"==typeof r.indicatorFolded&&s(r.indicatorFolded),u="string"==typeof r.indicatorOpen&&s(r.indicatorOpen);e.eachLine(t,n,function(t){++l;var n=null,s=t.gutterMarkers;if(s&&(s=s[r.gutter]),
o(e,l)){if(f&&s&&f.test(s.className))return;n=i(r.indicatorFolded)}else{var d=h(l,0),p=c&&c(e,d);if(p&&p.to.line-p.from.line>=a){if(u&&s&&u.test(s.className))return;n=i(r.indicatorOpen)}}(n||s)&&e.setGutterMarker(t,r.gutter,n)})}function s(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function l(e){var t=e.getViewport(),n=e.state.foldGutter;n&&(e.operation(function(){r(e,t.from,t.to)}),n.from=t.from,n.to=t.to)}function a(e,t,n){var i=e.state.foldGutter;if(i){var r=i.options;if(n==r.gutter){var s=o(e,t);s?s.clear():e.foldCode(h(t,0),r)}}}function c(e){var t=e.state.foldGutter;if(t){var n=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){l(e)},n.foldOnChangeTimeSpan||600)}}function f(e){var t=e.state.foldGutter;if(t){var n=t.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){var n=e.getViewport();t.from==t.to||n.from-t.to>20||t.from-n.to>20?l(e):e.operation(function(){n.from<t.from&&(r(e,n.from,t.from),t.from=n.from),n.to>t.to&&(r(e,t.to,n.to),t.to=n.to)})},n.updateViewportTimeSpan||400)}}function u(e,t){var n=e.state.foldGutter;if(n){var o=t.line;o>=n.from&&o<n.to&&r(e,o,o+1)}}e.defineOption("foldGutter",!1,function(o,i,r){r&&r!=e.Init&&(o.clearGutter(o.state.foldGutter.options.gutter),o.state.foldGutter=null,o.off("gutterClick",a),o.off("changes",c),o.off("viewportChange",f),o.off("fold",u),o.off("unfold",u),o.off("swapDoc",c)),i&&(o.state.foldGutter=new t(n(i)),l(o),o.on("gutterClick",a),o.on("changes",c),o.on("viewportChange",f),o.on("fold",u),o.on("unfold",u),o.on("swapDoc",c))});var h=e.Pos}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,n){var o=t.getLine(n),i=o.search(/\S/);return-1==i||/\bcomment\b/.test(t.getTokenTypeAt(e.Pos(n,i+1)))?-1:e.countColumn(o,null,t.getOption("tabSize"))}e.registerHelper("fold","indent",function(n,o){var i=t(n,o.line);if(!(0>i)){for(var r=null,s=o.line+1,l=n.lastLine();l>=s;++s){var a=t(n,s);if(-1==a);else{if(!(a>i))break;r=s}}return r?{from:e.Pos(o.line,n.getLine(o.line).length),to:e.Pos(r,n.getLine(r).length)}:void 0}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","markdown",function(t,n){function o(n){var o=t.getTokenTypeAt(e.Pos(n,0));return o&&/\bheader\b/.test(o)}function i(e,t,n){var i=t&&t.match(/^#+/);return i&&o(e)?i[0].length:(i=n&&n.match(/^[=\-]+\s*$/),i&&o(e+1)?"="==n[0]?1:2:r)}var r=100,s=t.getLine(n.line),l=t.getLine(n.line+1),a=i(n.line,s,l);if(a!==r){for(var c=t.lastLine(),f=n.line,u=t.getLine(f+2);c>f&&!(i(f+1,l,u)<=a);)++f,l=u,u=t.getLine(f+2);return{from:e.Pos(n.line,s.length),to:e.Pos(f,t.getLine(f).length)}}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return e.line-t.line||e.ch-t.ch}function n(e,t,n,o){this.line=t,this.ch=n,this.cm=e,this.text=e.getLine(t),this.min=o?Math.max(o.from,e.firstLine()):e.firstLine(),this.max=o?Math.min(o.to-1,e.lastLine()):e.lastLine()}function o(e,t){var n=e.cm.getTokenTypeAt(h(e.line,t));return n&&/\btag\b/.test(n)}function i(e){return e.line>=e.max?void 0:(e.ch=0,e.text=e.cm.getLine(++e.line),!0)}function r(e){return e.line<=e.min?void 0:(e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0)}function s(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(i(e))continue;return}if(o(e,t+1)){var n=e.text.lastIndexOf("/",t),r=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,r?"selfClose":"regular"}e.ch=t+1}}function l(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(r(e))continue;return}if(o(e,t+1)){m.lastIndex=t,e.ch=t;var n=m.exec(e.text);if(n&&n.index==t)return n}else e.ch=t}}function a(e){for(;;){m.lastIndex=e.ch;var t=m.exec(e.text);if(!t){if(i(e))continue;return}if(o(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}function c(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(r(e))continue;return}if(o(e,t+1)){var n=e.text.lastIndexOf("/",t),i=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,i?"selfClose":"regular"}e.ch=t}}function f(e,t){for(var n=[];;){var o,i=a(e),r=e.line,l=e.ch-(i?i[0].length:0);if(!i||!(o=s(e)))return;if("selfClose"!=o)if(i[1]){for(var c=n.length-1;c>=0;--c)if(n[c]==i[2]){n.length=c;break}if(0>c&&(!t||t==i[2]))return{tag:i[2],from:h(r,l),to:h(e.line,e.ch)}}else n.push(i[2])}}function u(e,t){for(var n=[];;){var o=c(e);if(!o)return;if("selfClose"!=o){var i=e.line,r=e.ch,s=l(e);if(!s)return;if(s[1])n.push(s[2]);else{for(var a=n.length-1;a>=0;--a)if(n[a]==s[2]){n.length=a;break}if(0>a&&(!t||t==s[2]))return{tag:s[2],from:h(e.line,e.ch),to:h(i,r)}}}else l(e)}}var h=e.Pos,d="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",p=d+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",m=new RegExp("<(/?)(["+d+"]["+p+"]*)","g");e.registerHelper("fold","xml",function(e,o){for(var i=new n(e,o.line,0);;){var r=a(i);if(!r||i.line!=o.line)return;var l=s(i);if(!l)return;if(!r[1]&&"selfClose"!=l){var c=h(i.line,i.ch),u=f(i,r[2]);return u&&t(u.from,c)>0?{from:c,to:u.from}:null}}}),e.findMatchingTag=function(e,o,i){var r=new n(e,o.line,o.ch,i);if(-1!=r.text.indexOf(">")||-1!=r.text.indexOf("<")){var a=s(r),c=a&&h(r.line,r.ch),d=a&&l(r);if(a&&d&&!(t(r,o)>0)){var p={from:h(r.line,r.ch),to:c,tag:d[2]};return"selfClose"==a?{open:p,close:null,at:"open"}:d[1]?{open:u(r,d[2]),close:p,at:"close"}:(r=new n(e,c.line,c.ch,i),{open:p,close:f(r,d[2]),at:"open"})}}},e.findEnclosingTag=function(e,t,o,i){for(var r=new n(e,t.line,t.ch,o);;){var s=u(r,i);if(!s)break;var l=new n(e,t.line,t.ch,o),a=f(l,s.tag);if(a)return{open:s,close:a}}},e.scanForClosingTag=function(e,t,o,i){var r=new n(e,t.line,t.ch,i?{from:0,to:i}:null);return f(r,o)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),"cjs"):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],function(t){e(t,"amd")}):e(CodeMirror,"plain")}(function(e,t){function n(e,t){var n=t;return function(){0==--n&&e()}}function o(t,o){var i=e.modes[t].dependencies;if(!i)return o();for(var r=[],s=0;s<i.length;++s)e.modes.hasOwnProperty(i[s])||r.push(i[s]);if(!r.length)return o();for(var l=n(o,r.length),s=0;s<r.length;++s)e.requireMode(r[s],l)}e.modeURL||(e.modeURL="../mode/%N/%N.js");var i={};e.requireMode=function(n,r){if("string"!=typeof n&&(n=n.name),e.modes.hasOwnProperty(n))return o(n,r);if(i.hasOwnProperty(n))return i[n].push(r);var s=e.modeURL.replace(/%N/g,n);if("plain"==t){var l=document.createElement("script");l.src=s;var a=document.getElementsByTagName("script")[0],c=i[n]=[r];e.on(l,"load",function(){o(n,function(){for(var e=0;e<c.length;++e)c[e]()})}),a.parentNode.insertBefore(l,a)}else"cjs"==t?(require(s),r()):"amd"==t&&requirejs([s],r)},e.autoLoadMode=function(t,n){e.modes.hasOwnProperty(n)||e.requireMode(n,function(){t.setOption("mode",t.getOption("mode"))})}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var n=this;e.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}function n(e,t,n){var o=e.options.hintOptions,i={};for(var r in p)i[r]=p[r];if(o)for(var r in o)void 0!==o[r]&&(i[r]=o[r]);if(n)for(var r in n)void 0!==n[r]&&(i[r]=n[r]);return i.hint.resolve&&(i.hint=i.hint.resolve(e,t)),i}function o(e){return"string"==typeof e?e:e.text}function i(e,t){function n(e,n){var i;i="string"!=typeof n?function(e){return n(e,t)}:o.hasOwnProperty(n)?o[n]:n,s[e]=i}var o={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(-t.menuSize()+1,!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close},i=/Mac/.test(navigator.platform);i&&(o["Ctrl-P"]=function(){t.moveFocus(-1)},o["Ctrl-N"]=function(){t.moveFocus(1)});var r=e.options.customKeys,s=r?{}:o;if(r)for(var l in r)r.hasOwnProperty(l)&&n(l,r[l]);var a=e.options.extraKeys;if(a)for(var l in a)a.hasOwnProperty(l)&&n(l,a[l]);return s}function r(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function s(t,n){this.completion=t,this.data=n,this.picked=!1;var s=this,l=t.cm,a=l.getInputField().ownerDocument,c=a.defaultView||a.parentWindow,h=this.hints=a.createElement("ul"),d=t.cm.options.theme;h.className="CodeMirror-hints "+d,this.selectedHint=n.selectedHint||0;for(var p=n.list,m=0;m<p.length;++m){var g=h.appendChild(a.createElement("li")),v=p[m],y=f+(m!=this.selectedHint?"":" "+u);null!=v.className&&(y=v.className+" "+y),g.className=y,v.render?v.render(g,n,v):g.appendChild(a.createTextNode(v.displayText||o(v))),g.hintId=m}var b=t.options.container||a.body,C=l.cursorCoords(t.options.alignWithWord?n.from:null),x=C.left,w=C.bottom,M=!0,k=0,T=0;if(b!==a.body){var P=-1!==["absolute","relative","fixed"].indexOf(c.getComputedStyle(b).position),O=P?b:b.offsetParent,L=O.getBoundingClientRect(),S=a.body.getBoundingClientRect();k=L.left-S.left-O.scrollLeft,T=L.top-S.top-O.scrollTop}h.style.left=x-k+"px",h.style.top=w-T+"px";var N=c.innerWidth||Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),F=c.innerHeight||Math.max(a.body.offsetHeight,a.documentElement.offsetHeight);b.appendChild(h);var E=h.getBoundingClientRect(),H=E.bottom-F,A=h.scrollHeight>h.clientHeight+1,j=l.getScrollInfo();if(H>0){var q=E.bottom-E.top,R=C.top-(C.bottom-E.top);if(R-q>0)h.style.top=(w=C.top-q-T)+"px",M=!1;else if(q>F){h.style.height=F-5+"px",h.style.top=(w=C.bottom-E.top-T)+"px";var I=l.getCursor();n.from.ch!=I.ch&&(C=l.cursorCoords(I),h.style.left=(x=C.left-k)+"px",E=h.getBoundingClientRect())}}var z=E.right-N;if(z>0&&(E.right-E.left>N&&(h.style.width=N-5+"px",z-=E.right-E.left-N),h.style.left=(x=C.left-z-k)+"px"),A)for(var D=h.firstChild;D;D=D.nextSibling)D.style.paddingRight=l.display.nativeBarWidth+"px";if(l.addKeyMap(this.keyMap=i(t,{moveFocus:function(e,t){s.changeActive(s.selectedHint+e,t)},setFocus:function(e){s.changeActive(e)},menuSize:function(){return s.screenAmount()},length:p.length,close:function(){t.close()},pick:function(){s.pick()},data:n})),t.options.closeOnUnfocus){var W;l.on("blur",this.onBlur=function(){W=setTimeout(function(){t.close()},100)}),l.on("focus",this.onFocus=function(){clearTimeout(W)})}return l.on("scroll",this.onScroll=function(){var e=l.getScrollInfo(),n=l.getWrapperElement().getBoundingClientRect(),o=w+j.top-e.top,i=o-(c.pageYOffset||(a.documentElement||a.body).scrollTop);return M||(i+=h.offsetHeight),i<=n.top||i>=n.bottom?t.close():(h.style.top=o+"px",void(h.style.left=x+j.left-e.left+"px"))}),e.on(h,"dblclick",function(e){var t=r(h,e.target||e.srcElement);t&&null!=t.hintId&&(s.changeActive(t.hintId),s.pick())}),e.on(h,"click",function(e){var n=r(h,e.target||e.srcElement);n&&null!=n.hintId&&(s.changeActive(n.hintId),t.options.completeOnSingleClick&&s.pick())}),e.on(h,"mousedown",function(){setTimeout(function(){l.focus()},20)}),this.scrollToActive(),e.signal(n,"select",p[this.selectedHint],h.childNodes[this.selectedHint]),!0}function l(e,t){if(!e.somethingSelected())return t;for(var n=[],o=0;o<t.length;o++)t[o].supportsSelection&&n.push(t[o]);return n}function a(e,t,n,o){if(e.async)e(t,o,n);else{var i=e(t,n);i&&i.then?i.then(o):o(i)}}function c(t,n){var o,i=t.getHelpers(n,"hint");if(i.length){var r=function(e,t,n){function o(i){return i==r.length?t(null):void a(r[i],e,n,function(e){e&&e.list.length>0?t(e):o(i+1)})}var r=l(e,i);o(0)};return r.async=!0,r.supportsSelection=!0,r}return(o=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:o})}:e.hint.anyword?function(t,n){return e.hint.anyword(t,n)}:function(){}}var f="CodeMirror-hint",u="CodeMirror-hint-active";e.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var o={hint:t};if(n)for(var i in n)o[i]=n[i];return e.showHint(o)},e.defineExtension("showHint",function(o){o=n(this,this.getCursor("start"),o);var i=this.listSelections();if(!(i.length>1)){if(this.somethingSelected()){if(!o.hint.supportsSelection)return;for(var r=0;r<i.length;r++)if(i[r].head.line!=i[r].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var s=this.state.completionActive=new t(this,o);s.options.hint&&(e.signal(this,"startCompletion",this),s.update(!0))}}),e.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});var h=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},d=window.cancelAnimationFrame||clearTimeout;t.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var i=t.list[n],r=this;this.cm.operation(function(){i.hint?i.hint(r.cm,t,i):r.cm.replaceRange(o(i),i.from||t.from,i.to||t.to,"complete"),e.signal(t,"pick",i),r.cm.scrollIntoView()}),this.close()},cursorActivity:function(){this.debounce&&(d(this.debounce),this.debounce=0);var e=this.startPos;this.data&&(e=this.data.from);var t=this.cm.getCursor(),n=this.cm.getLine(t.line);if(t.line!=this.startPos.line||n.length-t.ch!=this.startLen-this.startPos.ch||t.ch<e.ch||this.cm.somethingSelected()||!t.ch||this.options.closeCharacters.test(n.charAt(t.ch-1)))this.close();else{var o=this;this.debounce=h(function(){o.update()}),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){var t=this,n=++this.tick;a(this.options.hint,this.cm,this.options,function(o){t.tick==n&&t.finishUpdate(o,e)})}},finishUpdate:function(t,n){this.data&&e.signal(this.data,"update");var o=this.widget&&this.widget.picked||n&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=t,t&&t.list.length&&(o&&1==t.list.length?this.pick(t,0):(this.widget=new s(this,t),e.signal(t,"shown")))}},s.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,n){if(t>=this.data.list.length?t=n?this.data.list.length-1:0:0>t&&(t=n?0:this.data.list.length-1),this.selectedHint!=t){var o=this.hints.childNodes[this.selectedHint];o&&(o.className=o.className.replace(" "+u,"")),o=this.hints.childNodes[this.selectedHint=t],o.className+=" "+u,this.scrollToActive(),e.signal(this.data,"select",this.data.list[this.selectedHint],o)}},scrollToActive:function(){var e=this.hints.childNodes[this.selectedHint],t=this.hints.firstChild;e.offsetTop<this.hints.scrollTop?this.hints.scrollTop=e.offsetTop-t.offsetTop:e.offsetTop+e.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=e.offsetTop+e.offsetHeight-this.hints.clientHeight+t.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",{resolve:c}),e.registerHelper("hint","fromList",function(t,n){var o,i=t.getCursor(),r=t.getTokenAt(i),s=e.Pos(i.line,r.start),l=i;r.start<i.ch&&/\w/.test(r.string.charAt(i.ch-r.start-1))?o=r.string.substr(0,i.ch-r.start):(o="",s=i);for(var a=[],c=0;c<n.words.length;c++){var f=n.words[c];f.slice(0,o.length)==o&&a.push(f)}return a.length?{list:a,from:s,to:l}:void 0}),e.commands.autocomplete=e.showHint;var p={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var t=/[\w$]+/,n=500;e.registerHelper("hint","anyword",function(o,i){for(var r=i&&i.word||t,s=i&&i.range||n,l=o.getCursor(),a=o.getLine(l.line),c=l.ch,f=c;f&&r.test(a.charAt(f-1));)--f;for(var u=f!=c&&a.slice(f,c),h=i&&i.list||[],d={},p=new RegExp(r.source,"g"),m=-1;1>=m;m+=2)for(var g=l.line,v=Math.min(Math.max(g+m*s,o.firstLine()),o.lastLine())+m;g!=v;g+=m)for(var y,b=o.getLine(g);y=p.exec(b);)g==l.line&&y[0]===u||u&&0!=y[0].lastIndexOf(u,0)||Object.prototype.hasOwnProperty.call(d,y[0])||(d[y[0]]=!0,h.push(y[0]));return{list:h,from:e.Pos(l.line,f),to:e.Pos(l.line,c)}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t){return"pairs"==t&&"string"==typeof e?e:"object"==typeof e&&null!=e[t]?e[t]:u[t]}function n(e){for(var t=0;t<e.length;t++){var n=e.charAt(t),i="'"+n+"'";d[i]||(d[i]=o(n))}}function o(e){return function(t){return a(t,e)}}function i(e){var t=e.state.closeBrackets;if(!t||t.override)return t;var n=e.getModeAt(e.getCursor());return n.closeBrackets||t}function r(n){var o=i(n);if(!o||n.getOption("disableInput"))return e.Pass;for(var r=t(o,"pairs"),s=n.listSelections(),l=0;l<s.length;l++){if(!s[l].empty())return e.Pass;var a=c(n,s[l].head);if(!a||r.indexOf(a)%2!=0)return e.Pass}for(var l=s.length-1;l>=0;l--){var f=s[l].head;n.replaceRange("",h(f.line,f.ch-1),h(f.line,f.ch+1),"+delete")}}function s(n){var o=i(n),r=o&&t(o,"explode");if(!r||n.getOption("disableInput"))return e.Pass;for(var s=n.listSelections(),l=0;l<s.length;l++){if(!s[l].empty())return e.Pass;var a=c(n,s[l].head);if(!a||r.indexOf(a)%2!=0)return e.Pass}n.operation(function(){var e=n.lineSeparator()||"\n";n.replaceSelection(e+e,null),n.execCommand("goCharLeft"),s=n.listSelections();for(var t=0;t<s.length;t++){var o=s[t].head.line;n.indentLine(o,null,!0),n.indentLine(o+1,null,!0)}})}function l(t){var n=e.cmpPos(t.anchor,t.head)>0;return{anchor:new h(t.anchor.line,t.anchor.ch+(n?-1:1)),head:new h(t.head.line,t.head.ch+(n?1:-1))}}function a(n,o){var r=i(n);if(!r||n.getOption("disableInput"))return e.Pass;var s=t(r,"pairs"),a=s.indexOf(o);if(-1==a)return e.Pass;for(var c,u=t(r,"closeBefore"),d=t(r,"triples"),p=s.charAt(a+1)==o,m=n.listSelections(),g=a%2==0,v=0;v<m.length;v++){var y,b=m[v],C=b.head,x=n.getRange(C,h(C.line,C.ch+1));if(g&&!b.empty())y="surround";else if(!p&&g||x!=o)if(p&&C.ch>1&&d.indexOf(o)>=0&&n.getRange(h(C.line,C.ch-2),C)==o+o){if(C.ch>2&&/\bstring/.test(n.getTokenTypeAt(h(C.line,C.ch-2))))return e.Pass;y="addFour"}else if(p){var w=0==C.ch?" ":n.getRange(h(C.line,C.ch-1),C);if(e.isWordChar(x)||w==o||e.isWordChar(w))return e.Pass;y="both"}else{if(!g||!(0===x.length||/\s/.test(x)||u.indexOf(x)>-1))return e.Pass;y="both"}else y=p&&f(n,C)?"both":d.indexOf(o)>=0&&n.getRange(C,h(C.line,C.ch+3))==o+o+o?"skipThree":"skip";if(c){if(c!=y)return e.Pass}else c=y}var M=a%2?s.charAt(a-1):o,k=a%2?o:s.charAt(a+1);n.operation(function(){if("skip"==c)n.execCommand("goCharRight");else if("skipThree"==c)for(var e=0;3>e;e++)n.execCommand("goCharRight");else if("surround"==c){for(var t=n.getSelections(),e=0;e<t.length;e++)t[e]=M+t[e]+k;n.replaceSelections(t,"around"),t=n.listSelections().slice();for(var e=0;e<t.length;e++)t[e]=l(t[e]);n.setSelections(t)}else"both"==c?(n.replaceSelection(M+k,null),n.triggerElectric(M+k),n.execCommand("goCharLeft")):"addFour"==c&&(n.replaceSelection(M+M+M+M,"before"),n.execCommand("goCharRight"))})}function c(e,t){var n=e.getRange(h(t.line,t.ch-1),h(t.line,t.ch+1));return 2==n.length?n:null}function f(e,t){var n=e.getTokenAt(h(t.line,t.ch+1));return/\bstring/.test(n.type)&&n.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}var u={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"},h=e.Pos;e.defineOption("autoCloseBrackets",!1,function(o,i,r){r&&r!=e.Init&&(o.removeKeyMap(d),o.state.closeBrackets=null),i&&(n(t(i,"pairs")),o.state.closeBrackets=i,o.addKeyMap(d))});var d={Backspace:r,Enter:s};n(u.pairs+"`")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,n,o){function i(t){return r.parentNode?(r.style.top=Math.max(0,t.clientY-r.offsetHeight-5)+"px",void(r.style.left=t.clientX+5+"px")):e.off(document,"mousemove",i)}var r=document.createElement("div");return r.className="CodeMirror-lint-tooltip cm-s-"+t.options.theme,r.appendChild(o.cloneNode(!0)),t.state.lint.options.selfContain?t.getWrapperElement().appendChild(r):document.body.appendChild(r),e.on(document,"mousemove",i),i(n),null!=r.style.opacity&&(r.style.opacity=1),r}function n(e){e.parentNode&&e.parentNode.removeChild(e)}function o(e){e.parentNode&&(null==e.style.opacity&&n(e),e.style.opacity=0,setTimeout(function(){n(e)},600))}function i(n,i,r,s){function l(){e.off(s,"mouseout",l),a&&(o(a),a=null)}var a=t(n,i,r),c=setInterval(function(){if(a)for(var e=s;;e=e.parentNode){if(e&&11==e.nodeType&&(e=e.host),e==document.body)return;if(!e){l();break}}return a?void 0:clearInterval(c)},400);e.on(s,"mouseout",l)}function r(e,t,n){this.marked=[],this.options=t,this.timeout=null,this.hasGutter=n,this.onMouseOver=function(t){v(e,t)},this.waitingFor=0}function s(e,t){return t instanceof Function?{getAnnotations:t}:(t&&t!==!0||(t={}),t)}function l(e){var t=e.state.lint;t.hasGutter&&e.clearGutter(y);for(var n=0;n<t.marked.length;++n)t.marked[n].clear();t.marked.length=0}function a(t,n,o,r,s){var l=document.createElement("div"),a=l;return l.className="CodeMirror-lint-marker-"+o,r&&(a=l.appendChild(document.createElement("div")),a.className="CodeMirror-lint-marker-multiple"),0!=s&&e.on(a,"mouseover",function(e){i(t,e,n,a)}),l}function c(e,t){return"error"==e?e:t}function f(e){for(var t=[],n=0;n<e.length;++n){var o=e[n],i=o.from.line;(t[i]||(t[i]=[])).push(o)}return t}function u(e){var t=e.severity;t||(t="error");var n=document.createElement("div");return n.className="CodeMirror-lint-message-"+t,"undefined"!=typeof e.messageHTML?n.innerHTML=e.messageHTML:n.appendChild(document.createTextNode(e.message)),n}function h(t,n,o){function i(){s=-1,t.off("change",i)}var r=t.state.lint,s=++r.waitingFor;t.on("change",i),n(t.getValue(),function(n,o){t.off("change",i),r.waitingFor==s&&(o&&n instanceof e&&(n=o),t.operation(function(){p(t,n)}))},o,t)}function d(t){var n=t.state.lint,o=n.options,i=o.options||o,r=o.getAnnotations||t.getHelper(e.Pos(0,0),"lint");if(r)if(o.async||r.async)h(t,r,i);else{var s=r(t.getValue(),i,t);if(!s)return;s.then?s.then(function(e){t.operation(function(){p(t,e)})}):t.operation(function(){p(t,s)})}}function p(e,t){l(e);for(var n=e.state.lint,o=n.options,i=f(t),r=0;r<i.length;++r){var s=i[r];if(s){for(var h=null,d=n.hasGutter&&document.createDocumentFragment(),p=0;p<s.length;++p){var m=s[p],g=m.severity;g||(g="error"),h=c(h,g),o.formatAnnotation&&(m=o.formatAnnotation(m)),n.hasGutter&&d.appendChild(u(m)),m.to&&n.marked.push(e.markText(m.from,m.to,{className:"CodeMirror-lint-mark-"+g,__annotation:m}))}n.hasGutter&&e.setGutterMarker(r,y,a(e,d,h,s.length>1,n.options.tooltips))}}o.onUpdateLinting&&o.onUpdateLinting(t,i,e)}function m(e){var t=e.state.lint;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(function(){d(e)},t.options.delay||500))}function g(e,t,n){for(var o=n.target||n.srcElement,r=document.createDocumentFragment(),s=0;s<t.length;s++){var l=t[s];r.appendChild(u(l))}i(e,n,r,o)}function v(e,t){var n=t.target||t.srcElement;if(/\bCodeMirror-lint-mark-/.test(n.className)){for(var o=n.getBoundingClientRect(),i=(o.left+o.right)/2,r=(o.top+o.bottom)/2,s=e.findMarksAt(e.coordsChar({left:i,top:r},"client")),l=[],a=0;a<s.length;++a){var c=s[a].__annotation;c&&l.push(c)}l.length&&g(e,l,t)}}var y="CodeMirror-lint-markers";e.defineOption("lint",!1,function(t,n,o){if(o&&o!=e.Init&&(l(t),t.state.lint.options.lintOnChange!==!1&&t.off("change",m),e.off(t.getWrapperElement(),"mouseover",t.state.lint.onMouseOver),clearTimeout(t.state.lint.timeout),delete t.state.lint),n){for(var i=t.getOption("gutters"),a=!1,c=0;c<i.length;++c)i[c]==y&&(a=!0);var f=t.state.lint=new r(t,s(t,n),a);f.options.lintOnChange!==!1&&t.on("change",m),0!=f.options.tooltips&&"gutter"!=f.options.tooltips&&e.on(t.getWrapperElement(),"mouseover",f.onMouseOver),d(t)}}),e.defineExtension("performLint",function(){this.state.lint&&d(this)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){function t(t){if(t.getOption("disableInput"))return e.Pass;for(var n=t.listSelections(),o=[],a=t.getOption("autoCloseTags"),c=0;c<n.length;c++){if(!n[c].empty())return e.Pass;var f=n[c].head,u=t.getTokenAt(f),h=e.innerMode(t.getMode(),u.state),d=h.state,p=h.mode.xmlCurrentTag&&h.mode.xmlCurrentTag(d),m=p&&p.name;if(!m)return e.Pass;var g="html"==h.mode.configuration,v="object"==typeof a&&a.dontCloseTags||g&&s,y="object"==typeof a&&a.indentTags||g&&l;u.end>f.ch&&(m=m.slice(0,m.length-u.end+f.ch));var b=m.toLowerCase();if(!m||"string"==u.type&&(u.end!=f.ch||!/[\"\']/.test(u.string.charAt(u.string.length-1))||1==u.string.length)||"tag"==u.type&&p.close||u.string.indexOf("/")==f.ch-u.start-1||v&&i(v,b)>-1||r(t,h.mode.xmlCurrentContext&&h.mode.xmlCurrentContext(d)||[],m,f,!0))return e.Pass;var C="object"==typeof a&&a.emptyTags;if(C&&i(C,m)>-1)o[c]={text:"/>",newPos:e.Pos(f.line,f.ch+2)};else{var x=y&&i(y,b)>-1;o[c]={indent:x,text:">"+(x?"\n\n":"")+"</"+m+">",newPos:x?e.Pos(f.line+1,0):e.Pos(f.line,f.ch+1)}}}for(var w="object"==typeof a&&a.dontIndentOnAutoClose,c=n.length-1;c>=0;c--){var M=o[c];t.replaceRange(M.text,n[c].head,n[c].anchor,"+insert");var k=t.listSelections().slice(0);k[c]={head:M.newPos,anchor:M.newPos},t.setSelections(k),!w&&M.indent&&(t.indentLine(M.newPos.line,null,!0),t.indentLine(M.newPos.line+1,null,!0))}}function n(t,n){for(var o=t.listSelections(),i=[],s=n?"/":"</",l=t.getOption("autoCloseTags"),a="object"==typeof l&&l.dontIndentOnSlash,c=0;c<o.length;c++){if(!o[c].empty())return e.Pass;var f=o[c].head,u=t.getTokenAt(f),h=e.innerMode(t.getMode(),u.state),d=h.state;if(n&&("string"==u.type||"<"!=u.string.charAt(0)||u.start!=f.ch-1))return e.Pass;var p,m="xml"!=h.mode.name&&"htmlmixed"==t.getMode().name;if(m&&"javascript"==h.mode.name)p=s+"script";else if(m&&"css"==h.mode.name)p=s+"style";else{var g=h.mode.xmlCurrentContext&&h.mode.xmlCurrentContext(d);if(!g||g.length&&r(t,g,g[g.length-1],f))return e.Pass;p=s+g[g.length-1]}">"!=t.getLine(f.line).charAt(u.end)&&(p+=">"),i[c]=p}if(t.replaceSelections(i),o=t.listSelections(),!a)for(var c=0;c<o.length;c++)(c==o.length-1||o[c].head.line<o[c+1].head.line)&&t.indentLine(o[c].head.line)}function o(t){return t.getOption("disableInput")?e.Pass:n(t,!0)}function i(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,o=e.length;o>n;++n)if(e[n]==t)return n;return-1}function r(t,n,o,i,r){if(!e.scanForClosingTag)return!1;var s=Math.min(t.lastLine()+1,i.line+500),l=e.scanForClosingTag(t,i,null,s);if(!l||l.tag!=o)return!1;for(var a=r?1:0,c=n.length-1;c>=0&&n[c]==o;c--)++a;i=l.to;for(var c=1;a>c;c++){var f=e.scanForClosingTag(t,i,null,s);if(!f||f.tag!=o)return!1;i=f.to}return!0}e.defineOption("autoCloseTags",!1,function(n,i,r){if(r!=e.Init&&r&&n.removeKeyMap("autoCloseTags"),i){var s={name:"autoCloseTags"};("object"!=typeof i||i.whenClosing)&&(s["'/'"]=function(e){return o(e)}),("object"!=typeof i||i.whenOpening)&&(s["'>'"]=function(e){return t(e)}),n.addKeyMap(s)}});var s=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],l=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];e.commands.closeTag=function(e){return n(e)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){var n=e.state.selectionPointer;(null==t.buttons?t.which:t.buttons)?n.mouseX=n.mouseY=null:(n.mouseX=t.clientX,n.mouseY=t.clientY),i(e)}function n(e,t){if(!e.getWrapperElement().contains(t.relatedTarget)){var n=e.state.selectionPointer;n.mouseX=n.mouseY=null,i(e)}}function o(e){e.state.selectionPointer.rects=null,i(e)}function i(e){e.state.selectionPointer.willUpdate||(e.state.selectionPointer.willUpdate=!0,setTimeout(function(){r(e),e.state.selectionPointer.willUpdate=!1},50))}function r(e){var t=e.state.selectionPointer;if(t){if(null==t.rects&&null!=t.mouseX&&(t.rects=[],e.somethingSelected()))for(var n=e.display.selectionDiv.firstChild;n;n=n.nextSibling)t.rects.push(n.getBoundingClientRect());var o=!1;if(null!=t.mouseX)for(var i=0;i<t.rects.length;i++){var r=t.rects[i];r.left<=t.mouseX&&r.right>=t.mouseX&&r.top<=t.mouseY&&r.bottom>=t.mouseY&&(o=!0)}var s=o?t.value:"";e.display.lineDiv.style.cursor!=s&&(e.display.lineDiv.style.cursor=s)}}e.defineOption("selectionPointer",!1,function(i,r){var s=i.state.selectionPointer;s&&(e.off(i.getWrapperElement(),"mousemove",s.mousemove),e.off(i.getWrapperElement(),"mouseout",s.mouseout),e.off(window,"scroll",s.windowScroll),i.off("cursorActivity",o),i.off("scroll",o),i.state.selectionPointer=null,i.display.lineDiv.style.cursor=""),r&&(s=i.state.selectionPointer={value:"string"==typeof r?r:"default",mousemove:function(e){t(i,e)},mouseout:function(e){n(i,e)},windowScroll:function(){o(i)},rects:null,mouseX:null,mouseY:null,willUpdate:!1},e.on(i.getWrapperElement(),"mousemove",s.mousemove),e.on(i.getWrapperElement(),"mouseout",s.mouseout),e.on(window,"scroll",s.windowScroll),i.on("cursorActivity",o),i.on("scroll",o))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.overlayMode=function(t,n,o){return{startState:function(){return{base:e.startState(t),overlay:e.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(o){return{base:e.copyState(t,o.base),overlay:e.copyState(n,o.overlay),basePos:o.basePos,baseCur:null,overlayPos:o.overlayPos,overlayCur:null}},token:function(e,i){return(e!=i.streamSeen||Math.min(i.basePos,i.overlayPos)<e.start)&&(i.streamSeen=e,i.basePos=i.overlayPos=e.start),e.start==i.basePos&&(i.baseCur=t.token(e,i.base),i.basePos=e.pos),e.start==i.overlayPos&&(e.pos=e.start,i.overlayCur=n.token(e,i.overlay),i.overlayPos=e.pos),e.pos=Math.min(i.basePos,i.overlayPos),null==i.overlayCur?i.baseCur:null!=i.baseCur&&i.overlay.combineTokens||o&&null==i.overlay.combineTokens?i.baseCur+" "+i.overlayCur:i.overlayCur;
},indent:t.indent&&function(e,n,o){return t.indent(e.base,n,o)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){var i,r;return t.blankLine&&(i=t.blankLine(e.base)),n.blankLine&&(r=n.blankLine(e.overlay)),null==r?i:o&&null!=i?i+" "+r:r}}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,n,o){function i(t){var n=e.wheelEventPixels(t)["horizontal"==r.orientation?"x":"y"],o=r.pos;r.moveTo(r.pos+n),r.pos!=o&&e.e_preventDefault(t)}this.orientation=n,this.scroll=o,this.screen=this.total=this.size=1,this.pos=0,this.node=document.createElement("div"),this.node.className=t+"-"+n,this.inner=this.node.appendChild(document.createElement("div"));var r=this;e.on(this.inner,"mousedown",function(t){function n(){e.off(document,"mousemove",o),e.off(document,"mouseup",n)}function o(e){return 1!=e.which?n():void r.moveTo(l+(e[i]-s)*(r.total/r.size))}if(1==t.which){e.e_preventDefault(t);var i="horizontal"==r.orientation?"pageX":"pageY",s=t[i],l=r.pos;e.on(document,"mousemove",o),e.on(document,"mouseup",n)}}),e.on(this.node,"click",function(t){e.e_preventDefault(t);var n,o=r.inner.getBoundingClientRect();n="horizontal"==r.orientation?t.clientX<o.left?-1:t.clientX>o.right?1:0:t.clientY<o.top?-1:t.clientY>o.bottom?1:0,r.moveTo(r.pos+n*r.screen)}),e.on(this.node,"mousewheel",i),e.on(this.node,"DOMMouseScroll",i)}function n(e,n,o){this.addClass=e,this.horiz=new t(e,"horizontal",o),n(this.horiz.node),this.vert=new t(e,"vertical",o),n(this.vert.node),this.width=null}t.prototype.setPos=function(e,t){return 0>e&&(e=0),e>this.total-this.screen&&(e=this.total-this.screen),t||e!=this.pos?(this.pos=e,this.inner.style["horizontal"==this.orientation?"left":"top"]=e*(this.size/this.total)+"px",!0):!1},t.prototype.moveTo=function(e){this.setPos(e)&&this.scroll(e,this.orientation)};var o=10;t.prototype.update=function(e,t,n){var i=this.screen!=t||this.total!=e||this.size!=n;i&&(this.screen=t,this.total=e,this.size=n);var r=this.screen*(this.size/this.total);o>r&&(this.size-=o-r,r=o),this.inner.style["horizontal"==this.orientation?"width":"height"]=r+"px",this.setPos(this.pos,i)},n.prototype.update=function(e){if(null==this.width){var t=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;t&&(this.width=parseInt(t.height))}var n=this.width||0,o=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1;return this.vert.node.style.display=i?"block":"none",this.horiz.node.style.display=o?"block":"none",i&&(this.vert.update(e.scrollHeight,e.clientHeight,e.viewHeight-(o?n:0)),this.vert.node.style.bottom=o?n+"px":"0"),o&&(this.horiz.update(e.scrollWidth,e.clientWidth,e.viewWidth-(i?n:0)-e.barLeft),this.horiz.node.style.right=i?n+"px":"0",this.horiz.node.style.left=e.barLeft+"px"),{right:i?n:0,bottom:o?n:0}},n.prototype.setScrollTop=function(e){this.vert.setPos(e)},n.prototype.setScrollLeft=function(e){this.horiz.setPos(e)},n.prototype.clear=function(){var e=this.horiz.node.parentNode;e.removeChild(this.horiz.node),e.removeChild(this.vert.node)},e.scrollbarModel.simple=function(e,t){return new n("CodeMirror-simplescroll",e,t)},e.scrollbarModel.overlay=function(e,t){return new n("CodeMirror-overlayscroll",e,t)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineOption("showTrailingSpace",!1,function(t,n,o){o==e.Init&&(o=!1),o&&!n?t.removeOverlay("trailingspace"):!o&&n&&t.addOverlay({token:function(e){for(var t=e.string.length,n=t;n&&/\s/.test(e.string.charAt(n-1));--n);return n>e.pos?(e.pos=n,null):(e.pos=t,"trailingspace")},name:"trailingspace"})})});